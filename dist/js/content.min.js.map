{"version":3,"file":"content.min.js","sources":["../../src/content.js"],"sourcesContent":["console.info('Text formatting init.');\n\n// eslint-disable-next-line no-undef\nchrome.runtime.onMessage.addListener(function(request) {\n  console.log('request', request);\n\n  // 接收到 background 传递的替换信息\n  if (request.code === 1) {\n    // eslint-disable-next-line no-undef\n    var replacedText = pangu.spacing(request.message); // 要替换的文本\n    console.log('替换前文本：', request.message);\n    console.log('替换后文本：', replacedText);\n\n    if (replacedText && request.isEditable) {\n      replaceSelectedText(replacedText);\n    }\n  }\n});\n\n// eslint-disable-next-line no-unused-vars\nfunction getSelectedText() {\n  // 获取当前活动的输入框\n  var inputElement = document.activeElement; \n  var selectedText = '';\n\n  if (inputElement.tagName === 'INPUT' || inputElement.tagName === 'TEXTAREA') {\n    selectedText = inputElement.value.substring(inputElement.selectionStart, inputElement.selectionEnd);\n  }\n\n  return selectedText;\n}\n\n// 替换选中的文本片段\nfunction replaceSelectedText(replacement) {\n  // 获取当前活动的输入框\n  var inputElement = document.activeElement; \n\n  if (inputElement.tagName === 'INPUT' || inputElement.tagName === 'TEXTAREA') {\n    var start = inputElement.selectionStart;\n    var end = inputElement.selectionEnd;\n\n    var newValue = inputElement.value.substring(0, start) + replacement + inputElement.value.substring(end);\n    inputElement.value = newValue;\n\n    // 重新设置光标位置\n    var newCursorPosition = start + replacement.length;\n    inputElement.setSelectionRange(newCursorPosition, newCursorPosition);\n  }\n}\n\nconsole.info('Text formatting end.');"],"names":["console","info","chrome","runtime","onMessage","addListener","request","log","code","replacedText","pangu","spacing","message","isEditable","replacement","inputElement","document","activeElement","tagName","start","selectionStart","end","selectionEnd","newValue","value","substring","newCursorPosition","length","setSelectionRange"],"mappings":"8SAAAA,QAAQC,KAAK,yBAGbC,OAAOC,QAAQC,UAAUC,aAAY,SAASC,GAI5C,GAHAN,QAAQO,IAAI,UAAWD,GAGF,IAAjBA,EAAQE,KAAY,CAEtB,IAAIC,EAAeC,MAAMC,QAAQL,EAAQM,SACzCZ,QAAQO,IAAI,SAAUD,EAAQM,SAC9BZ,QAAQO,IAAI,SAAUE,GAElBA,GAAgBH,EAAQO,YAoBhC,SAA6BC,GAE3B,IAAIC,EAAeC,SAASC,cAE5B,GAA6B,UAAzBF,EAAaG,SAAgD,aAAzBH,EAAaG,QAAwB,CAC3E,IAAIC,EAAQJ,EAAaK,eACrBC,EAAMN,EAAaO,aAEnBC,EAAWR,EAAaS,MAAMC,UAAU,EAAGN,GAASL,EAAcC,EAAaS,MAAMC,UAAUJ,GACnGN,EAAaS,MAAQD,EAGrB,IAAIG,EAAoBP,EAAQL,EAAYa,OAC5CZ,EAAaa,kBAAkBF,EAAmBA,EACpD,CACF,CAfA,CAnB0BjB,EAExB,CACF,IAiCAT,QAAQC,KAAK"}